<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<body>-->

<!--<canvas id="myCanvas" width="180" height="40"-->
        <!--style="border:1px solid #d3d3d3; background: #fffff0;">-->
    <!--Your browser does not support the canvas element.-->
<!--</canvas>-->

<!--<script>-->
    <!--var canvas = document.getElementById("myCanvas");-->
    <!--var ctx = canvas.getContext("2d");-->
    <!--ctx.font = "30px Arial";-->
    <!--ctx.fillText("",10,30);-->
    <!--var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);-->
    <!--var img = $("img");-->
    <!--img.src = canvas.toDataURL("../images/png");-->
<!--</script>-->

<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html>
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<head>
    <script>
        window.onload = function() {
            draw();
            var saveButton = document.getElementById("saveImageBtn");
            bindButtonEvent(saveButton, "click", saveImageInfo);
            var dlButton = document.getElementById("downloadImageBtn");
            bindButtonEvent(dlButton, "click", saveAsLocalImage);
        };
        function draw(){
            var canvas = document.getElementById("myCanvas");
            var ctx = canvas.getContext("2d");

//            ctx.fillStyle = "rgba(125, 46, 138, 0.5)";
            ctx.fillStyle = "white";
            ctx.fillRect(0,0,180,60);
            ctx.font = "26px Arial";

            ctx.fillStyle = "rgba( 0, 0, 0, 1)"; // black color
            ctx.fillStyle="#FF0000";
//            ctx.fillText("2元电子券", 60, 25);//在此修改图片上的文字内容
//            ctx.fillText("3元电子券", 60, 25);//在此修改图片上的文字内容
//            ctx.fillText("5元电子券", 60, 25);//在此修改图片上的文字内容
            ctx.fillText("鼓励奖", 50, 30);//在此修改图片上的文字内容
        }

        function bindButtonEvent(element, type, handler)
        {
            if(element.addEventListener) {
                element.addEventListener(type, handler, false);
            } else {
                element.attachEvent('on'+type, handler);
            }
        }

        function saveImageInfo ()
        {
            var mycanvas = document.getElementById("myCanvas");
            var image    = mycanvas.toDataURL("image/png");
            var w=window.open('about:blank','image from canvas');
            w.document.write("<img src='"+image+"' alt='from canvas'/>");
        }

        function saveAsLocalImage () {
            var myCanvas = document.getElementById("myCanvas");
            // here is the most important part because if you dont replace you will get a DOM 18 exception.
            // var image = myCanvas.toDataURL("image/png").replace("image/png", "image/octet-stream;Content-Disposition: attachment;filename=foobar.png");
            var image = myCanvas.toDataURL("image/png").replace("image/png", "image/octet-stream");

            window.location.href=image; // it will save locally
        }
    </script>
</head>
<body bgcolor="#E6E6FA">
<div>
    <!--<canvas width=200 height=200 id="thecanvas"></canvas>-->
    <canvas id="myCanvas" width="180" height="40">
        Your browser does not support the canvas element.
    </canvas>
    <button id="saveImageBtn">Save Image</button>
    <button id="downloadImageBtn">Download Image</button>
</div>
</body>
</html>


