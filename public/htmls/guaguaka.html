<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>刮刮卡</title>

    <link rel="stylesheet" type="text/css" href="../stylesheets/main.css" />
    <link rel="stylesheet" href="../stylesheets/iconfont.css">

    <link rel="shortcut icon" type="image/x-icon" href="../images/iconfont-guaguaqia.ico" media="screen" />
</head>
<body>

<div id="main">
    <div class="guaguaqia">
        <i class="icon iconfontbig">&#x3555;</i>
    </div>

    <div class="msg1">刮开看看运气吧！</div>
        <a>刮奖区：</a>
        <img id="base" />
        <img id="cover" src="../images/cover.png"/>
    </div>
</div>

<div class="info">
    奖项设置
    <ol class="prize_set">
    </ol>
</div>

<div class="info">
    中奖情况
    <ol class="prize_result">
    </ol>
</div>
<div id="data">
</div>
<div id="footer">
</div>

<script src="../javascripts/jquery.js"></script>
<script src='../javascripts/jquery.eraser.js' type='text/javascript'></script>
<script type="text/javascript">

    (function () {

        $(document).ready(function() {
            var imgs = ['../images/ggk_1.png', '../images/ggk_2.png', '../images/ggk_3.png', '../images/ggk_4.png', '../images/ggk_5.png'];
            var num = Math.floor(Math.random() * 5);
            $("#base").attr("src", imgs[num]);
        });

        $('#cover').eraser({
            progressFunction: function(p) {
                if(Math.round(p*100)>=55){
                    $('#cover').eraser('clear');
                    event.preventDefault();
                }
                $('#data').html(Math.round(p*100)+'%');
            }
        });

        $(function () {
            $.getJSON('/api/prize_info/name/guaguaka', function (data) {
                $(data).each(function(index) {
                    $(".prize_set").append("<li>" + data[index].description + ":" + data[index].content + ", 数量:" + data[index].limits +"台。</li>");
                    weight = weight + data[index].limits;
                    console.log(weight);
                });
            });
        });


    });


</script>

</body>
</html>